<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To-Do List from API</title>

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>

<div class="container mt-5">
    <h2 class="text-center mb-4">To-Do List (API Data)</h2>

    <!-- Search Bar -->
    <input type="text" id="searchInput" class="form-control mb-2"
           placeholder="Search by title..." onkeyup="searchTitle()">

    <!-- Count Display -->
    <p id="countDisplay" class="mb-3">Total To-Dos: 0</p>

    <table class="table table-bordered table-striped">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Completed</th>
            </tr>
        </thead>
        <tbody id="todoTableBody">
            <!-- API data -->
        </tbody>
    </table>
</div>

<script>
    const apiUrl = "https://jsonplaceholder.typicode.com/todos/";

    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            let tableBody = document.getElementById("todoTableBody");

            data.forEach(todo => {
                let row = `
                    <tr>
                        <td>${todo.id}</td>
                        <td>${todo.title}</td>
                        <td>${todo.completed ? "Yes" : "No"}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });

            // Initial count
            document.getElementById("countDisplay").innerText =
                `Total To-Dos: ${data.length}`;
        })
        .catch(error => console.log("Error:", error));

    function searchTitle() {
        let input = document.getElementById("searchInput").value.toLowerCase();
        let rows = document.querySelectorAll("#todoTableBody tr");
        let visibleCount = 0;

        rows.forEach(row => {
            let title = row.children[1].innerText.toLowerCase();

            if (title.includes(input)) {
                row.style.display = "";
                visibleCount++;
            } else {
                row.style.display = "none";
            }
        });

        document.getElementById("countDisplay").innerText =
            `Total To-Dos: ${visibleCount}`;
    }
</script>


</body>
</html>
